(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8dbaf894"],{"0cb2":function(t,e,n){var r=n("e330"),a=n("7b0b"),o=Math.floor,i=r("".charAt),s=r("".replace),c=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,r,f,d){var p=n+t.length,v=r.length,g=l;return void 0!==f&&(f=a(f),g=u),s(d,g,(function(a,s){var u;switch(i(s,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,n);case"'":return c(e,p);case"<":u=f[c(s,1,-1)];break;default:var l,d=+s;if(0==d)return a;if(v<d)return 0!==(l=o(d/10))&&l<=v?void 0===r[l-1]?i(s,1):r[l-1]+i(s,1):a;u=r[d-1]}return void 0===u?"":u}))}},"14c3":function(t,e,n){"use strict";var r=n("bd2d"),a=n.n(r);e.a=function(t){return parseFloat(a.a.format(t,{precision:14}))}},"14c34":function(t,e,n){var r=n("da84"),a=n("c65b"),o=n("825a"),i=n("1626"),s=n("c6b6"),c=n("9263"),u=r.TypeError;t.exports=function(t,e){var n=t.exec;if(i(n))return null!==(n=a(n,t,e))&&o(n),n;if("RegExp"===s(t))return a(c,t,e);throw u("RegExp#exec called on incompatible receiver")}},"517a":function(t,e,n){"use strict";e.a={"暴击":.08,"攻击加成":.08,"生命加成":.08,"防御加成":.16,"效果命中":.08,"效果抵抗":.08}},5319:function(t,e,n){"use strict";var r=n("2ba4"),a=n("c65b"),o=n("e330"),i=n("d784"),s=n("d039"),c=n("825a"),u=n("1626"),l=n("5926"),f=n("50c4"),d=n("577e"),p=n("1d80"),v=n("8aa5"),g=n("dc4a"),h=n("0cb2"),b=n("14c34"),m=n("b622")("replace"),x=Math.max,y=Math.min,_=o([].concat),w=o([].push),$=o("".indexOf),O=o("".slice),R=(n="$0"==="a".replace(/./,"$0"),!!/./[m]&&""===/./[m]("a","$0"));i("replace",(function(t,e,n){var o=R?"$":"$0";return[function(t,n){var r=p(this),o=null==t?void 0:g(t,m);return o?a(o,t,r,n):a(e,d(r),t,n)},function(t,a){var i=c(this),s=d(t);if("string"==typeof a&&-1===$(a,o)&&-1===$(a,"$<")&&(t=n(e,i,s,a),t.done))return t.value;for(var p,g=u(a),m=(g||(a=d(a)),i.global),R=(m&&(p=i.unicode,i.lastIndex=0),[]);null!==(A=b(i,s))&&(w(R,A),m);)""===d(A[0])&&(i.lastIndex=v(s,f(i.lastIndex),p));for(var k,E="",S=0,j=0;j<R.length;j++){for(var A,D=d((A=R[j])[0]),F=x(y(l(A.index),s.length),0),I=[],P=1;P<A.length;P++)w(I,void 0===(k=A[P])?k:String(k));var C=A.groups,q=g?(q=_([D],I,F,s),void 0!==C&&w(q,C),d(r(a,void 0,q))):h(D,s,F,I,C,a);S<=F&&(E+=O(s,S,F)+q,S=F+D.length)}return E+O(s,S)}]}),!!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!n||R)},5439:function(t,e,n){"use strict";var r,a={300002:"雪幽魂",300003:"地藏像",300004:"蝠翼",300006:"涅槃之火",300007:"三味",300008:"魍魉之匣",300009:"被服",300010:"招财猫",300011:"反枕",300012:"轮入道",300013:"日女巳时",300014:"镜姬",300015:"钟灵",300018:"狰",300019:"火灵",300020:"鸣屋",300021:"薙魂",300022:"心眼",300023:"木魅",300024:"树妖",300026:"网切",300027:"阴摩罗",300029:"伤魂鸟",300030:"破势",300031:"镇墓兽",300032:"珍珠",300033:"骰子鬼",300034:"蚌精",300035:"魅妖",300036:"针女",300039:"返魂香",300048:"狂骨",300049:"幽谷响",300050:"土蜘蛛",300051:"胧车",300052:"荒骷髅",300053:"地震鲶",300054:"蜃气楼",300073:"飞缘魔",300074:"兵主部",300075:"青女房",300076:"涂佛",300077:"鬼灵歌伎",300079:"遗念火",300080:"共潜",300081:"恶楼",300082:"贝吹坊",300083:"海月火玉",300084:"出世螺"},o={};for(r in a)o[a[r]]=r;e.a={code2name:a,name2code:o}},6561:function(t,e,n){"use strict";var r=n("1da1"),a=(n("96cf"),n("99af"),n("b0c0"),n("ac1f"),n("5319"),n("d3b7"),n("7db0"),n("159b"),{mixins:[n("e175").a],props:{drag:{type:Boolean,default:!1}},data:function(){return{ext:null}},methods:{upload:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.file,a=e.$loading({lock:!0}),console.log("读取御魂数据文件…"),n.prev=3,n.next=6,e.readYuhunFile(r);case 6:return o=n.sent,i=o.list,o=o.count15,console.log("读取完毕，总御魂数".concat(i.length," ，其中满级御魂数").concat(o)),i=i,s=(s=r.name).replace(".json",""),n.next=15,e.$yuhunset.find({name:{$eq:s}}).toArray();case 15:return 0<n.sent.length&&(s+=(new Date).getTime()),console.log("确定御魂集名称：".concat(s)),c=new Date,u={_id:c.getTime(),name:s,updatedAt:c,length:o,lengthNot15:i.length-o},console.log("准备保存御魂集…"),n.next=23,e.saveYuhunSet(u);case 23:return console.log("成功保存御魂集。"),i.forEach((function(t){t.setId=u._id,t._id=t.setId+t["御魂ID"]})),console.log("准备保存御魂数…"),n.next=28,e.$yuhunSave(u._id,i);case 28:return console.log("成功保存御魂数据。"),console.log("准备创建默认收藏夹…"),n.next=32,e.$collection.insert({setId:u._id,list:[{id:(new Date).getTime(),label:"默认",type:"folder",children:[]}]});case 32:console.log("成功创建默认收藏夹。"),a.close(),e.$emit("uploaded"),console.log("跳转到御魂Hub主页面"),e.$goto("home"),n.next=42;break;case 39:n.prev=39,n.t0=n.catch(3),a.close();case 42:case"end":return n.stop()}}),n,null,[[3,39]])})))()},saveYuhunSet:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$yuhunset.insert(t);case 2:e.$store.commit("addSet",t),e.$store.commit("changeCurrentSet",t),e.$ls.set("currentSetId",t._id);case 5:case"end":return n.stop()}}),n)})))()}}});n("b1b9"),n=n("2877"),n=Object(n.a)(a,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticClass:"import-yuhun-box-page",staticStyle:{"text-align":"center"}},[e("el-row",[e("el-col",{attrs:{xs:24,sm:{span:20,offset:2},md:{span:18,offset:3},lg:{span:16,offset:4},xl:{span:14,offset:5}}},[e("el-upload",{staticStyle:{width:"100%"},attrs:{action:"#","http-request":t.upload,"before-upload":t.beforeUpload,drag:t.drag,"show-file-list":!1}},[e("i",{staticClass:"el-icon-upload"}),e("div",[t._t("default")],2)])],1)],1)],1)}),[],!1,null,null,null);e.a=n.exports},7989:function(t,e,n){"use strict";n.r(e);var r=n("6561"),a=n("afe6");r={components:{ImportYuhunBox:r.a},mixins:[a.a],watch:{setList:function(){this.check()}},mounted:function(){this.check()},methods:{check:function(){this.setList&&0<this.setList.length&&this.$goto("home")}}},a=n("2877"),n=Object(a.a)(r,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticStyle:{"text-align":"center","margin-top":"60px"}},[e("h2",{staticClass:"big-title"},[t._v(" 御魂Hub ")]),e("p",{staticStyle:{color:"gray"}},[t._v(" 纯浏览器端一站式管理分析你的御魂。 ")]),e("import-yuhun-box",{attrs:{drag:""}},[e("span",{staticStyle:{"font-weight":"bold"}},[t._v("点击此处")]),t._v("选择文件导入，或将 .json 文件拖到此处 ")]),t._m(0)],1)}),[function(){var t=this.$createElement;t=this._self._c||t;return t("div",{staticStyle:{width:"100%","margin-top":"200px","text-align":"left"}},[t("ins",{staticClass:"adsbygoogle",staticStyle:{display:"block",margin:"0 auto"},attrs:{"data-ad-client":"ca-pub-5357485527807566","data-ad-slot":"6761379851","data-ad-format":"auto","data-full-width-responsive":"true"}})])}],!1,null,null,null);e.default=n.exports},"7c04":function(t,e,n){},"8aa5":function(t,e,n){"use strict";var r=n("6547").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"99af":function(t,e,n){"use strict";var r=n("23e7"),a=n("da84"),o=n("d039"),i=n("e8b5"),s=n("861d"),c=n("7b0b"),u=n("07fa"),l=n("8418"),f=n("65f0"),d=n("1dde"),p=n("b622"),v=(n=n("2d00"),p("isConcatSpreadable")),g=9007199254740991,h="Maximum allowed index exceeded",b=a.TypeError;p=51<=n||!o((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),a=d("concat");r({target:"Array",proto:!0,forced:!p||!a},{concat:function(t){for(var e,n,r,a=c(this),o=f(a,0),d=0,p=-1,m=arguments.length;p<m;p++)if(function(t){if(!s(t))return!1;var e=t[v];return void 0!==e?!!e:i(t)}(r=-1===p?a:arguments[p])){if(n=u(r),g<d+n)throw b(h);for(e=0;e<n;e++,d++)e in r&&l(o,d,r[e])}else{if(g<=d)throw b(h);l(o,d++,r)}return o.length=d,o}})},a35a:function(t,e,n){"use strict";var r={1:{4:49,5:65,6:81},3:{4:8,5:11,6:14},5:{4:206,5:274,6:342}},a={1:{4:17,5:22,6:27},3:{4:4,5:5,6:6},5:{4:69,5:92,6:114}},o={4:6,5:8,6:10},i={"速度":{4:8,5:10,6:12},"暴击伤害":{4:9,5:11,6:14},"攻击加成":o,"防御加成":o,"生命加成":o,"效果命中":o,"效果抵抗":o,"暴击":o},s=(o={4:2,5:2,6:3},{"速度":{4:2,5:2,6:3},"暴击伤害":{4:3,5:4,6:5},"攻击加成":o,"防御加成":o,"生命加成":o,"效果命中":o,"效果抵抗":o,"暴击":o});e.a=function(t){var e=t["御魂等级"],n=t["御魂星级"],o=t["位置"];t=t.mainProp;return-1<[1,3,5].indexOf(o)?r[o][n]+a[o][n]*e:(o=i[t][n]+s[t][n]*e,"速度"!==t&&(o/=100),o)}},afe6:function(t,e,n){"use strict";n("4e82");var r=n("2f62");n("d3b7"),n("159b"),r={computed:Object(r.b)({setList:function(t){if(t.setList)return t=function(t){if(!t)return null;var e=[];return t.forEach((function(t){return e.push(t)})),e}(t.setList),t.sort((function(t,e){return e=e.updatedAt,"number"!=typeof e&&(e=(e="string"==typeof e?new Date(e):e).getTime()),t=t.updatedAt,e-("number"!=typeof t?(t="string"==typeof t?new Date(t):t).getTime():t)})),t}})},n=n("2877"),n=Object(n.a)(r,void 0,void 0,!1,null,null,null);e.a=n.exports},b1b9:function(t,e,n){"use strict";n("7c04")},b668:function(t,e,n){"use strict";e.a=["荒骷髅","蜃气楼","土蜘蛛","地震鲶","胧车","鬼灵歌伎"]},d784:function(t,e,n){"use strict";n("ac1f");var r=n("e330"),a=n("6eeb"),o=n("9263"),i=n("d039"),s=n("b622"),c=n("9112"),u=s("species"),l=RegExp.prototype;t.exports=function(t,e,n,f){var d,p=s(t),v=!i((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),g=v&&!i((function(){var e=!1,n=/a/;return"split"===t&&((n={constructor:{}}).constructor[u]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e}));v&&g&&!n||(d=r(/./[p]),g=e(p,""[t],(function(t,e,n,a,i){t=r(t);var s=e.exec;return s===o||s===l.exec?v&&!i?{done:!0,value:d(e,n,a)}:{done:!0,value:t(n,e,a)}:{done:!1}})),a(String.prototype,t,g[0]),a(l,p,g[1])),f&&c(l[p],"sham",!0)}},d81d:function(t,e,n){"use strict";var r=n("23e7"),a=n("b727").map;r({target:"Array",proto:!0,forced:!n("1dde")("map")},{map:function(t){return a(this,t,1<arguments.length?arguments[1]:void 0)}})},e175:function(t,e,n){"use strict";n("d3b7"),n("b0c0"),n("fb6a");var r=n("b85c"),a=function(t,e){return e?(e<1&&(e*=100),-1<["速度","暴击","生命加成","攻击加成","防御加成"].indexOf(t)?(n=e)<3?1:n<6?2:n<9?3:n<12?4:n<15?5:n<18?6:n<21?7:n<24?8:n<27?9:n<30?10:void 0:-1<["暴击伤害","效果命中","效果抵抗"].indexOf(t)?(n=e)<4?1:n<8?2:n<12?3:n<16?4:n<20?5:n<24?6:n<28?7:n<32?8:n<36?9:n<40?10:void 0:0):0;var n},o=n("e1bd"),i=n("a35a"),s=n("517a"),c=n("b668"),u=n("14c3");function l(t){"string"==typeof t[0]&&t.shift();var e,n=[],l=0,f=Object(r.a)(t);try{for(f.s();!(e=f.n()).done;){var d,p=e.value,v=(15===p["御魂等级"]&&l++,p.mainProp),g=(v||(v=function(t){var e=t["位置"];if(1===e)return"攻击";if(3===e)return"防御";if(5===e)return"生命";if(2===e&&t["速度"]&&30<t["速度"])return"速度";if(4===e){if(t["效果命中"]&&.3<t["效果命中"])return"效果命中";if(t["效果抵抗"]&&.3<t["效果抵抗"])return"效果抵抗"}if(6===e){if(t["暴击"]&&.3<t["暴击"])return"暴击";if(t["暴击伤害"]&&.3<t["暴击伤害"])return"暴击伤害"}return t["攻击加成"]&&.3<t["攻击加成"]?"攻击加成":t["生命加成"]&&.3<t["生命加成"]?"生命加成":t["防御加成"]&&.3<t["防御加成"]?"防御加成":void 0}(p),p.mainProp=v),-1<c.a.indexOf(p["御魂类型"])&&(p.isBossYuhun=!0,p["固有属性"]&&(p.bossFixedProp=p["固有属性"],delete p["固有属性"])),_=$=w=d=y=x=m=b=h=g=void 0,p),h=v,b=0,m=[],x=null,y=Object(r.a)(o.a);try{for(y.s();!(d=y.n()).done;){var _,w=d.value,$=g[w];($=$&&(w===h?Object(u.a)($-Object(i.a)(g)):$))&&(g.isBossYuhun&&($===s.a[w]?x=w:$>s.a[w]&&m.push(w)),(_=a(w,$))&&(b+=g[w+"score"]=_))}}catch(t){y.e(t)}finally{y.f()}g.isBossYuhun&&!g.bossFixedProp&&(x||1===m.length&&(x=m[0]),x&&(g.bossFixedProp=x)),0<b&&(g.score=b),n.push(p)}}catch(t){f.e(t)}finally{f.f()}return{list:n,count15:l}}n("d81d"),n("159b"),n("99af"),n("b64b");var f=n("5439"),d={Hp:"生命",Defense:"防御",Attack:"攻击",HpRate:"生命加成",DefenseRate:"防御加成",AttackRate:"攻击加成",Speed:"速度",CritRate:"暴击",CritPower:"暴击伤害",EffectHitRate:"效果命中",EffectResistRate:"效果抵抗"},p=f.a.code2name,v={1:"AttackRate",2:"HpRate",3:"DefenseRate",4:"CritRate",5:"EffectHitRate",6:"EffectResistRate"},g=function(t){return t&&(t.equip_data?t.equip_data.map((function(t){var e,n={"御魂ID":t.id,"御魂等级":t.level,"御魂星级":t.quality,"御魂类型":p[String(t.suit_id)],"位置":t.pos,born:t.born,lock:t.lock,garbage:t.garbage,weared:t.weared,mainProp:d[Object.keys(t.base_attr)[0]]},r=(t.single_attr&&(n.bossFixedProp=d[v[t.single_attr]]),[]);for(e in t.rand_attr)r.push(d[e]);n.props=r;var a,o,i,s,c={};for(a in t.rand_attr){var u=c[a]||0;c[a]=u+t.rand_attr[a]}for(o in t.base_attr){var l=c[o]||0;c[o]=l+t.base_attr[o]}return t.single_attr&&(i=v[t.single_attr],s=c[i]||0,c[i]=s+("DefenseRate"===i?.16:.08)),Object.keys(c).forEach((function(t){n[d[t]]=c[t]})),n})):t.data&&t.data.hero_equips?(e=t.data.hero_equips,n=function(t){var e,n=[],a=Object(r.a)(t);try{for(a.s();!(e=a.n()).done;){var o=e.value.equips;o&&0<o.length&&(n=n.concat(o))}}catch(t){a.e(t)}finally{a.f()}return n}(t.data.heroes),e.map((function(t){for(var e={"御魂ID":t.id,"御魂等级":t.level,"御魂星级":t.quality,"御魂类型":p[String(t.suit_id)],"位置":t.pos+1,born:t.born,lock:t.lock,garbage:t.garbage,weared:-1<n.indexOf(t.id),mainProp:d[t.base_attr.type]},r=(t.single_attrs&&0<t.single_attrs.length&&(e.bossFixedProp=d[t.single_attrs[0].type]),{}),a=[],o=(t.attrs.forEach((function(t){return a.push(d[t.type])})),e.props=a,[t.base_attr].concat(t.attrs,t.single_attrs)),i=0;i<o.length;i++){var s=o[i],c=r[s.type]||0;r[s.type]=c+s.value}return Object.keys(r).forEach((function(t){e[d[t]]=r[t]})),e}))):t);var e,n};f={methods:{beforeUpload:function(t){return t="json"===this.getFileExt(t),t||this.$message.error("导入文件只能是 Json(.json) 格式的文件"),t},readYuhunFile:function(t){var e=this;return new Promise((function(n,r){var a=new FileReader;a.addEventListener("error",(function(t){"NotFoundError"===t.target.error.name?e.$message.error("导入出错，请把Json文件解压出来之后再拖入御魂Hub"):e.$message.error("导入出错：".concat(t.target.error.name)),r()})),a.readAsText(t),a.onload=function(){var t=JSON.parse(a.result);t=g(t);n(l(t))}}))},getFileExt:function(t){var e=t.name.lastIndexOf(".");return t.name.slice(e+1).toLowerCase()}}},n=n("2877"),n=Object(n.a)(f,void 0,void 0,!1,null,null,null);e.a=n.exports},e1bd:function(t,e,n){"use strict";e.a=["攻击加成","暴击伤害","暴击","速度","效果命中","效果抵抗","生命加成","防御加成","攻击","防御","生命"]}}]);