(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-bf910ff2"],{"0e6e":function(e,t,n){"use strict";n("ce18")},"3e10":function(e,t,n){},4474:function(e,t,n){"use strict";n.r(t);var r=n("1da1"),a=n("b85c"),i=(n("96cf"),n("b0c0"),n("6561")),s=n("afe6"),o=n("f279"),c=n("91a2"),l={mixins:[s.a,o.a,c.a],props:{setId:{type:String},currentSetName:{type:String}},data:function(){return{newName:null,changeNameBox:!1}},computed:{canChange:function(){if(this.newName===this.currentSetName)return!1;var e,t=this.setList,n=!1,r=Object(a.a)(t);try{for(r.s();!(e=r.n()).done;)if(e.value.name===this.newName){n=!0;break}}catch(e){r.e(e)}finally{r.f()}return!n}},methods:{changeName:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$yuhunset.update({name:{$eq:e.currentSetName}},{name:e.newName,setUpdatedAt:new Date});case 2:if(e.$store.commit("changeSetName",{oldName:e.currentSetName,newName:e.newName}),e.$checkSetIdInSync(e.setId))return t.next=7,e.checkAndSync();t.next=7;break;case 7:e.changeNameBox=!1;case 8:case"end":return t.stop()}}),t)})))()}}},u=n("2877"),d=(l=Object(u.a)(l,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("el-popover",{attrs:{placement:"bottom",width:"200",title:"修改名称",trigger:"click"},on:{show:function(t){e.newName=e.currentSetName}},model:{value:e.changeNameBox,callback:function(t){e.changeNameBox=t},expression:"changeNameBox"}},[t("el-input",{attrs:{size:"small",autofocus:""},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}},[t("el-button",{attrs:{slot:"append",disabled:!e.canChange},on:{click:e.changeName},slot:"append"},[e._v(" 确定 ")])],1),t("el-button",{staticStyle:{padding:"0"},attrs:{slot:"reference",type:"text",icon:"el-icon-edit"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}},slot:"reference"})],1)}),[],!1,null,"1937a18e",null).exports,n("9d39")),p=n("d72f"),m=n("e2a9"),f={mixins:[c.a,p.a,o.a],props:{set:{type:Object}},computed:{isSetSync:function(){return!!this.currentSyncBrief&&(this.set._id===this.currentSyncBrief.set1Id||this.set._id===this.currentSyncBrief.set2Id||this.set._id===this.currentSyncBrief.set3Id)},canISync:function(){return this.$canISync()}},methods:{onCommand:function(e){"sync"===e?this.sync():this.cancelSync()},sync:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.checkSyncAccount()){t.next=4;break}return e.$message.error("您最多可同步 ".concat(e.currentSyncBrief.syncAccount," 个御魂集，若要启用此御魂集的云同步，请先取消同步其他御魂集")),t.abrupt("return");case 4:return r=e.set._id,t.next=7,m.a.setBrief({setName:n,setId:r});case 7:return t.next=9,e.checkAndSync();case 9:case"end":return t.stop()}}),t)})))()},checkSyncAccount:function(){var e=this.currentSyncBrief;return e?1!==e.syncAccount||e.set1Id?2!==e.syncAccount||e.set1Id&&e.set2Id?3!==e.syncAccount||e.set1Id&&e.set2Id&&e.set3Id?void 0:e.set1Id?e.set2Id?"set3":"set2":"set1":e.set1Id?"set2":"set1":"set1":null},cancelSync:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.cancel({cancelSetId:e.set._id});case 2:return t.next=4,e.checkAndSync(!0);case 4:e.$message.success("成功取消同步");case 5:case"end":return t.stop()}}),t)})))()}}},h=(f=Object(u.a)(f,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return e.set?t("el-dropdown",{attrs:{trigger:"click",size:"small"},on:{command:e.onCommand}},[t("span",{staticStyle:{cursor:"pointer"}},[e.isSetSync?t("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("云同步")]):t("el-tag",{attrs:{size:"mini",type:"info"}},[e._v("本地")])],1),e.canISync?t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.isSetSync?[t("el-dropdown-item",{attrs:{command:"cancelSync"}},[t("i",{staticClass:"el-icon-remove"}),e._v(" 取消云同步 ")])]:[t("el-dropdown-item",{attrs:{command:"sync"}},[t("i",{staticClass:"el-icon-upload"}),e._v(" 开启云同步 ")])]],2):e._e()],1):e._e()}),[],!1,null,"5a2d0564",null).exports,i={components:{ImportYuhunBox:i.a,ChangeSetNameButton:l,SyncButton:f},mixins:[s.a,d.a,p.a,o.a,c.a],methods:{changeSet:function(e){this.$store.commit("changeCurrentSet",e),this.$ls.set("currentSetId",e._id),this.$goto("home"),this.$emit("on-change-set")},deleteSet:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id,e.next=3,n.$confirm("将顺带删除所有御魂数据以及收藏夹数据，确定继续？","删除此御魂集");case 3:return a=n.$loading({lock:!0}),e.next=6,n.$yuhunset.remove({_id:{$eq:r}});case 6:return console.log("已删除御魂集[".concat(t.name,"]本身")),e.next=9,n.$collection.remove({setId:{$eq:r}});case 9:return console.log("已删除御魂集[".concat(t.name,"]下的收藏数据")),e.next=12,n.$yuhun.remove({setId:{$eq:r}});case 12:if(console.log("已删除御魂集[".concat(t.name,"]下的御魂数据")),n.$store.commit("deleteSet",t),a.close(),0===n.setList.length&&n.$emit("on-setList-empty"),n.$checkSetIdInSync(r))return e.next=20,m.a.cancel({cancelSetId:r});e.next=21;break;case 20:n.checkAndSync();case 21:case"end":return e.stop()}}),e)})))()}}},l=Object(u.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"0 20px 20px 20px"}},[n("el-card",{staticStyle:{"margin-top":"10px","text-align":"center"}},[n("import-yuhun-box",[e._v(" 导入御魂集 ")])],1),n("el-card",{staticStyle:{"margin-top":"10px"}},[n("h6",[e._v("御魂集")]),n("el-timeline",{staticStyle:{"padding-left":"0px"},attrs:{reverse:!1}},e._l(e.setList,(function(t,r){return n("el-timeline-item",{key:t.name,attrs:{color:t.name===e.currentSet.name?"#0bbd87":null}},[n("div",{staticStyle:{cursor:"pointer",display:"flex"},on:{click:function(n){return e.changeSet(t)}}},[n("el-tooltip",{staticStyle:{display:"inline-block","max-width":"200px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{effect:"dark",content:t.name,placement:"top","open-delay":500}},[n("div",[e._v(e._s(t.name))])]),n("span",[e._v("["+e._s(t.length)),t.lengthNot15?n("span",[e._v("+"+e._s(t.lengthNot15))]):e._e(),e._v("]")]),n("change-set-name-button",{attrs:{"set-id":""+t._id,"current-set-name":t.name},on:{changeName:function(t){return e.$emit("changSet")}}}),n("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),e.deleteSet(r,t)}}})],1),n("div",{staticStyle:{display:"flex"}},[n("div",{staticStyle:{"flex-grow":"1"}},[n("sync-button",{attrs:{set:t}})],1),n("span",{staticStyle:{"font-size":"13px",color:"lightgray"},attrs:{title:t.updatedAt}},[n("timeago",{attrs:{datetime:t.updatedAt,"auto-update":""}})],1)])])})),1)],1)],1)}),[],!1,null,null,null).exports,f={name:"WeixinLink"},s=Object(u.a)(f,(function(){var e=this.$createElement;e=this._self._c||e;return e("el-popover",{attrs:{title:"关注御魂Hub微信公众号",width:"200",trigger:"hover"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:n("62e5")}}),e("img",{staticStyle:{width:"25px"},attrs:{slot:"reference",src:n("b0fc")},slot:"reference"})])}),[],!1,null,null,null).exports,i=[function(){var e=this.$createElement;e=this._self._c||e;return e("a",{attrs:{href:"https://weibo.com/p/1005055137849905",target:"_blank"}},[e("img",{staticStyle:{width:"25px"},attrs:{src:n("cc49")}})])}],f={name:"WeiboLink"},f=Object(u.a)(f,(function(){this.$createElement;return this._self._c,this._m(0)}),i,!1,null,null,null).exports,i={props:{name:{type:String}}},i=(n("594d"),Object(u.a)(i,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("span",{staticStyle:{color:"#3d3c3b !important","font-weight":"bold"}},[t("el-tooltip",{attrs:{effect:"dark",content:"当前御魂集："+e.name+"，点击切换",placement:"bottom"}},[t("el-button",{staticClass:"current-set-name-btn",attrs:{type:"text",icon:"el-icon-user"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.$emit("on-click")}}},[e._v(e._s(e.name))])],1)],1)}),[],!1,null,"489b6f43",null).exports),n("b1a0")),g=(n("0eb6"),n("b7ef"),n("8bd4"),n("e9c4"),n("1d61")),v=n.n(g),b=(g={props:{isShow:{type:Boolean}},data:function(){return{isShowInner:!1,marked:v.a,text:'大家好，为了维持御魂Hub的长远发展，御魂Hub在即日起推出**赞助会员**服务。\n\n\n现有功能（计算一套、计算一设多套、收藏、数据、更新）会继续**一直保持免费**，请大家放心。\n\n\n在原有免费功能的基础上，御魂Hub将为**赞助会员**提供更多增值功能与服务。\n\n\n目前成为御魂Hub的赞助会员，将享受到以下权益：\n\n\n### 数据云同步\n\n登录会员账号后，将会自动云端同步数据。\n\n包括：御魂集、收藏、预设、计算历史、常用式神。\n\n再也不怕浏览器数据被意外清除，也不需要为了转移/备份数据在浏览器上反复导入导出数据。甚至可以电脑端导入数据，手机端同步之后继续计算。\n\n注：云同步只是同步已导入御魂Hub的数据，并不是（也无法）同步游戏中的御魂数据。\n\n\n### 专属功能\n\n计划开发中的数据分析、多设多套功能都将作为赞助会员的专属功能推出，敬请期待。\n\n\n**<span style="color: red;">更多详细介绍请注册普通会员后到用户主页查看！</span>**\n'}},watch:{isShow:function(){this.isShowInner=this.isShow},isShowInner:function(){this.$emit("update:isShow",this.isShowInner)}}},g=(n("0e6e"),Object(u.a)(g,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("el-dialog",{attrs:{title:"赞助会员",visible:e.isShowInner,"close-on-click-modal":!1,"append-to-body":"",width:"800px"},on:{"update:visible":function(t){e.isShowInner=t}}},[t("div",{staticStyle:{padding:"0 30px 30px 30px"}},[t("div",{staticClass:"yuhunhub-title"},[t("div",{staticStyle:{"font-size":"30px"}},[e._v(" 御魂Hub ")]),t("div",{staticStyle:{"font-size":"16px"}},[t("span",[t("i",{staticClass:"el-icon-s-custom"}),e._v(" 赞助会员 ")])])]),t("div",{domProps:{innerHTML:e._s(e.marked(e.text))}})])])}),[],!1,null,"d36add2e",null).exports),n("b6f0")),w=(g={components:{UserBenifitBox:g},mixins:[c.a],props:{isShow:{type:Boolean}},data:function(){var e=[{required:!0,message:"必填",trigger:"change"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"change"}],t=[{required:!0,message:"必填",trigger:"change"},{min:6,message:"至少 6 位长度",trigger:"change"}];return{isShowInner:!1,isShowToopTip:!1,isShowUserBenifitBox:!1,mode:"login",user:{loginName:null,username:null,password:null},rulesRegister:{loginName:e,username:[{required:!0,message:"必填",trigger:"change"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"change"}],password:t,email:[{type:"email",message:"请填写正确的邮箱格式",trigger:"change"}]},rulesLogin:{loginName:e,password:t}}},watch:{isShow:function(){this.isShowInner=this.isShow},isShowInner:function(){var e=this;this.$emit("update:isShow",this.isShowInner),this.isShowInner?this.$nextTick((function(){setTimeout((function(){e.isShowToopTip=!0}),1e3)})):this.isShowToopTip=!1}},mounted:function(){},methods:{login:function(){var e=this;this.$refs.formLogin.validate((function(t){t&&e.submitLogin()}))},submitLogin:function(){var e=this;b.a.login({loginName:this.user.loginName,password:this.user.password}).then((function(t){t=t.data,e.$message.success("登录成功"),e.isShowInner=!1,e.user={},e.$store.commit("setCurrentUser",t),e.$emit("on-login",t),e.$ls.set("HASH",window.btoa(window.encodeURIComponent(JSON.stringify(t)))),e.$canISync()||e.$router.push({name:"user"})}))},register:function(){var e=this;this.$refs.formRegister.validate((function(t){t&&e.submitRegister()}))},submitRegister:function(){var e=this;b.a.register(this.user).then((function(){e.$message.success("注册成功，请登录"),e.mode="login",e.user={}}))}}},g=(n("ce54"),Object(u.a)(g,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("el-dialog",{attrs:{title:"login"===e.mode?"会员登录":"会员注册",visible:e.isShowInner,"close-on-click-modal":!1,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.isShowInner=t}}},[e.isShowInner?t("div",{staticStyle:{padding:"0 30px 30px 30px"}},[t("div",{staticClass:"yuhunhub-title"},[t("div",{staticStyle:{"font-size":"30px"}},[e._v(" 御魂Hub ")]),t("div",{staticStyle:{"font-size":"16px"}},[t("user-benifit-box",{attrs:{"is-show":e.isShowUserBenifitBox},on:{"update:isShow":function(t){e.isShowUserBenifitBox=t},"update:is-show":function(t){e.isShowUserBenifitBox=t}}})],1)]),"login"===e.mode?t("div",[t("el-form",{ref:"formLogin",attrs:{model:e.user,rules:e.rulesLogin,"label-width":"60px"}},[t("el-form-item",{attrs:{label:"帐号",prop:"loginName"}},[t("el-input",{model:{value:e.user.loginName,callback:function(t){e.$set(e.user,"loginName",t)},expression:"user.loginName"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password","show-password":""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v(" 登录 ")]),t("el-button",{on:{click:function(t){e.mode="register"}}},[e._v(" 注册 ")])],1),t("p",{staticStyle:{"margin-left":"60px"}},[e._v(" 如您不需要数据云同步功能，则不需要注册和登录，其他功能照常使用。 ")])],1)],1):t("div",[t("el-form",{ref:"formRegister",attrs:{model:e.user,rules:e.rulesRegister,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"登录名",prop:"loginName"}},[t("el-input",{attrs:{placeholder:"用于登录"},model:{value:e.user.loginName,callback:function(t){e.$set(e.user,"loginName",t)},expression:"user.loginName"}})],1),t("el-form-item",{attrs:{label:"昵称",prop:"username"}},[t("el-input",{attrs:{placeholder:"用于显示"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password","show-password":"",placeholder:"6位以上"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),t("el-divider",[e._v("以下联系方式建议至少填写一项")]),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"选填"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),t("el-form-item",{attrs:{label:"QQ",prop:"qq"}},[t("el-input",{attrs:{placeholder:"选填"},model:{value:e.user.qq,callback:function(t){e.$set(e.user,"qq",t)},expression:"user.qq"}})],1),t("el-form-item",{attrs:{label:"微信",prop:"wx"}},[t("el-input",{attrs:{placeholder:"选填"},model:{value:e.user.wx,callback:function(t){e.$set(e.user,"wx",t)},expression:"user.wx"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"success"},on:{click:e.register}},[e._v(" 立即注册 ")]),t("el-button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:function(t){e.mode="login"}}},[e._v(" 返回登录 ")])],1)],1)],1)]):e._e()])}),[],!1,null,"948bf066",null).exports),n("4e76")),y=n("515d"),x=n("8f5b"),S={components:{YuhunCard:n("a508").a},data:function(){return{isShow:!1,yuhun:null}},watch:{"$store.state.currentShowYuhun":function(){var e=this.$store.state.currentShowYuhun;e&&(this.yuhun=e,this.isShow=!0)}}};l={components:{SetListBox:l,WeixinLink:s,WeiboLink:f,CurrentSetName:i,UserLoginBox:g,OpenYuhunDialog:Object(u.a)(S,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("q-dialog",{attrs:{seamless:"","auto-close":"",position:"bottom"},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[t("q-card",[t("q-bar",[t("div",[e._v("御魂信息")]),t("q-space"),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[t("q-tooltip",[e._v("关闭")])],1)],1),t("q-card-section",[e.yuhun?t("yuhun-card",{attrs:{data:e.yuhun}}):e._e()],1)],1)],1)}),[],!1,null,null,null).exports},mixins:[d.a,h.a,p.a,c.a,o.a,w.a,y.a,x.a],data:function(){return{isAlive:!0,defaultActive:"home",menus:["home","about","updateLogs","learn","outputYuhun"],isShowUserLoginBox:!1,drawer:!1,hasLoadBrief:!1,interval:null,isShowDonateConfirm:!1,isShowEnableSyncTip:!1,isDevelopMode:!1}},computed:{canISync:function(){return this.$canISync()},isShowTooltip:function(){var e,t=this.$route.matched,n=Object(a.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(-1<["import","home","fight"].indexOf(r.name))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},watch:{$route:function(){var e=this;this.isAlive=!1,this.$nextTick((function(){e.isAlive=!0})),this.matchRouteName()},currentSet:function(){this.loadCollection()},currentUser:{handler:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.currentUser&&e.currentUser.myApply&&(e.interval||(e.interval=setInterval(Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$loadUserInfo();case 2:t.sent.myApply||(clearInterval(e.interval),e.interval=null,e.isShowDonateConfirm=!0,e.checkAndSync());case 4:case"end":return t.stop()}}),t)}))),12e4))),e.currentUser||(e.hasLoadBrief=!1),e.hasLoadBrief)return t.abrupt("return");t.next=4;break;case 4:if(e.$canISync())return t.next=8,e.checkAndSync();t.next=11;break;case 8:!(n=e.currentSyncBrief)||n.set1Id||n.set2Id||n.set3Id||(e.isShowEnableSyncTip=!0),e.hasLoadBrief=!0;case 11:case"end":return t.stop()}}),t)})))()},deep:!0,immediate:!0}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$loadUserInfo();case 2:n=t.sent,e.checkUserValid(n),e.loadSetList(),e.loadMyPreset(),e.loadHistory(),e.loadFavHero(),e.loadCollection(),e.matchRouteName();case 10:case"end":return t.stop()}}),t)})))()},methods:{checkUserValid:function(e){var t,n=this;!e||!e.validDate||e.local||(t=this.$ls.get("neverInfoMe"))&&-25<this.$dayjs(new Date(parseInt(t))).diff(new Date,"day")||5<(t=this.$dayjs(e.validDate).diff(new Date,"day"))||t<-30||(e=null,e=t<=5&&0<t?"还有 ".concat(t," 天到期"):0===t?"今天到期":"已于 ".concat(-t," 天前过期"),this.$alert("您好，您的赞助会员".concat(e,"，如需续期请微信联系作者。到期后云同步功能将无法使用，请及时续期哦！"),"赞助会员到期提示",{type:"warning",confirmButtonText:"不再提示",callback:function(e){"confirm"===e&&n.$ls.set("neverInfoMe",(new Date).getTime())}}))},onMenuSelect:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("logout"===e)return n.prev=1,n.next=4,b.a.logout();n.next=16;break;case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),console.error(n.t0);case 9:t.$ls.remove("HASH"),t.$store.commit("setCurrentUser",null),t.$message.success("退出成功"),t.$store.commit("setCurrentSyncBrief",null),t.$router.push({name:"home"}),n.next=17;break;case 16:"sync"===e?t.checkAndSync():t.$router.push({name:e});case 17:case"end":return n.stop()}}),n,null,[[1,6]])})))()},loadMyPreset:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$myPresetFind();case 2:n=t.sent,e.$store.commit("setupMyPreset",n);case 4:case"end":return t.stop()}}),t)})))()},loadHistory:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$historyFind();case 2:n=t.sent,e.$store.commit("setupHistory",n);case 4:case"end":return t.stop()}}),t)})))()},loadFavHero:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$favHeroFind();case 2:n=t.sent,e.$store.commit("setupFavHero",n);case 4:case"end":return t.stop()}}),t)})))()},matchRouteName:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,i,s,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:if(0===e.$route.matched.length)return t.abrupt("return");t.next=4;break;case 4:n=e.$route.matched,r=Object(a.a)(e.menus),t.prev=6,r.s();case 8:if((i=r.n()).done){t.next=30;break}i=i.value,s=Object(a.a)(n),t.prev=11,s.s();case 13:if((o=s.n()).done){t.next=20;break}if(o=o.value,i===o.name)return e.defaultActive=i,t.abrupt("return");t.next=18;break;case 18:t.next=13;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(11),s.e(t.t0);case 25:return t.prev=25,s.f(),t.finish(25);case 28:t.next=8;break;case 30:t.next=35;break;case 32:t.prev=32,t.t1=t.catch(6),r.e(t.t1);case 35:return t.prev=35,r.f(),t.finish(35);case 38:case"end":return t.stop()}}),t,null,[[6,32,35,38],[11,22,25,28]])})))()}}},n("a884"),s=Object(u.a)(l,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("q-layout",{staticClass:"h100"},[t("el-container",{staticClass:"h100"},[e.$store.state.isShowPageHeader?t("div",{staticStyle:{width:"100%","min-height":"60px"}},[t("span")]):e._e(),e.$store.state.isShowPageHeader?t("el-header",{staticStyle:{"overflow-x":"auto","overflow-y":"hidden"}},[t("el-menu",{attrs:{"default-active":e.defaultActive,mode:"horizontal","background-color":"#f3eee7","text-color":"#c63545","active-text-color":"#c63545"},on:{select:e.onMenuSelect}},[t("el-menu-item",{attrs:{index:"home"}},[t("el-tooltip",{attrs:{effect:"dark",content:"点击这里可返回计算界面",manual:!0,value:e.isShowTooltip,placement:"bottom"}},[t("span",{staticClass:"app-title"},[t("img",{attrs:{src:n("e164")},on:{click:function(t){if(!t.metaKey)return null;e.isDevelopMode=!0}}}),e._v(" 御魂Hub ")])]),e.currentSet?[t("el-divider",{staticStyle:{height:"2em"},attrs:{direction:"vertical"}}),t("CurrentSetName",{attrs:{name:e.currentSet.name},on:{"on-click":function(t){e.drawer=!e.drawer}}})]:e._e()],2),t("el-submenu",{staticStyle:{float:"right","font-weight":"bold"},attrs:{index:"learnMore"}},[t("template",{staticStyle:{display:"flex"},slot:"title"},[t("span",{staticStyle:{"line-height":"19px"}},[t("span",{staticClass:"el-icon-s-promotion"}),t("span",[e._v("了解更多")])])]),t("el-menu-item",{staticStyle:{"font-weight":"bold"},attrs:{index:"outputYuhun"}},[t("i",{staticClass:"el-icon-sell",staticStyle:{color:"inherit"}}),e._v(" 御魂导出 ")]),t("el-menu-item",{staticStyle:{"font-weight":"bold"},attrs:{index:"learn"}},[t("i",{staticClass:"el-icon-video-camera",staticStyle:{color:"inherit"}}),e._v(" 视频教程 ")]),t("el-menu-item",{staticStyle:{"font-weight":"bold"},attrs:{index:"updateLogs"}},[t("i",{staticClass:"el-icon-watch",staticStyle:{color:"inherit"}}),e._v(" 更新日志 ")]),t("el-menu-item",{staticStyle:{"font-weight":"bold"},attrs:{index:"about"}},[t("i",{staticClass:"el-icon-s-custom",staticStyle:{color:"inherit"}}),e._v(" 关于作者 ")])],2),e.currentUser?t("el-submenu",{staticStyle:{float:"right","font-weight":"bold"},attrs:{index:"user"}},[t("template",{staticStyle:{display:"flex"},slot:"title"},[t("span",{staticStyle:{"line-height":"19px"}},[t("span",{staticClass:"el-icon-user-solid"}),t("el-badge",{attrs:{value:e.canISync?"赞助会员":"普通会员",type:e.canISync?"success":"info"}},[t("span",[e._v(e._s(e.currentUser.username))])])],1)]),t("el-menu-item",{staticStyle:{"font-weight":"bold"},attrs:{index:"user"}},[t("i",{staticClass:"el-icon-s-home",staticStyle:{color:"inherit"}}),e._v(" 用户主页 ")]),e.canISync?t("el-menu-item",{staticStyle:{"font-weight":"bold"},attrs:{index:"sync"}},[t("i",{staticClass:"el-icon-refresh",staticStyle:{color:"inherit"}}),e._v(" 立即同步 ")]):e._e(),t("el-menu-item",{staticStyle:{"font-weight":"bold"},attrs:{index:"logout"}},[t("span",{attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-circle-close",staticStyle:{color:"inherit"}}),e._v(" 退出 ")])])],2):t("el-menu-item",{staticStyle:{"font-weight":"bold",float:"right"},attrs:{index:"user"}},[t("span",{staticStyle:{"line-height":"19px"},on:{click:function(t){e.isShowUserLoginBox=!0}}},[t("span",{staticClass:"el-icon-user-solid"}),t("span",[e._v("注册/登录")])])]),t("el-menu-item",{staticStyle:{float:"right","font-weight":"bold"},attrs:{index:"weibo"}},[t("WeiboLink")],1),t("el-menu-item",{staticStyle:{float:"right","font-weight":"bold"},attrs:{index:"weixinLogo"}},[t("WeixinLink")],1),e.isDevelopMode?t("el-menu-item",{staticStyle:{float:"right","font-weight":"bold"},attrs:{index:"fight"}},[t("template",{staticStyle:{display:"flex"},slot:"title"},[t("span",{staticStyle:{"line-height":"19px"}},[t("span",{staticClass:"el-icon-medal"}),t("span",[e._v("搏击俱乐部")])])])],2):e._e()],1)],1):e._e(),t("user-login-box",{attrs:{"is-show":e.isShowUserLoginBox},on:{"update:isShow":function(t){e.isShowUserLoginBox=t},"update:is-show":function(t){e.isShowUserLoginBox=t},"on-login":function(t){return e.checkUserValid(t)}}}),e.isAlive?t("router-view",{staticClass:"flex1 h0",on:{"show-user-box":function(t){e.isShowUserLoginBox=!0}}}):e._e()],1),t("el-drawer",{attrs:{"custom-class":"auto-overflow",title:"导入或选择已有御魂集",visible:e.drawer,direction:"ltr"},on:{"update:visible":function(t){e.drawer=t}}},[t("set-list-box",{ref:"setListBox",on:{"on-setList-empty":function(t){e.drawer=!1},"on-change-set":function(t){e.drawer=!1}}})],1),t("el-dialog",{attrs:{title:"感谢支持！",visible:e.isShowDonateConfirm,width:"700px"},on:{"update:visible":function(t){e.isShowDonateConfirm=t}}},[t("div",{staticStyle:{margin:"0 20px"}},[t("p",[e._v(" 核实完毕，您的 "),t("span",{staticStyle:{"font-weight":"bold","font-family":"monospace",color:"#c63545","font-size":"16px"}},[t("i",{staticClass:"el-icon-s-custom"}),e._v(" 赞助会员 ")]),e._v(" 已生效或续费！ ")]),t("p",[e._v("历史记录、我的预设、常用式神将会自动开始同步。")]),t("p",[e._v("御魂集则需要您在左侧御魂集列表中，针对您想同步的御魂集，点击启用云同步才会开始同步哦。")]),t("img",{staticStyle:{width:"300px"},attrs:{src:n("ccd8")}}),t("p",[e._v("祝您使用愉快！")])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.isShowDonateConfirm=!1}}},[e._v("关闭")])],1)]),t("el-dialog",{attrs:{title:"温馨提示",visible:e.isShowEnableSyncTip,width:"700px"},on:{"update:visible":function(t){e.isShowEnableSyncTip=t}}},[t("div",{staticStyle:{margin:"0 20px"}},[t("p",{staticStyle:{"font-weight":"bold"}},[e._v(" 系统检测到您还没有开启御魂集的同步！ ")]),t("p",[e._v("同步御魂集需要您在左侧御魂集列表中，针对您想同步的御魂集，点击启用云同步才会开始同步，如下图所示。")]),t("img",{staticStyle:{width:"300px"},attrs:{src:n("ccd8")}})]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.isShowEnableSyncTip=!1}}},[e._v("关闭")])],1)]),t("open-yuhun-dialog")],1)}),[],!1,null,null,null);t.default=s.exports},"4e76":function(e,t,n){"use strict";var r=n("2f62");r={computed:Object(r.b)({favHero:function(e){return e.favHero}})},n=n("2877"),n=Object(n.a)(r,void 0,void 0,!1,null,null,null);t.a=n.exports},5439:function(e,t,n){"use strict";var r,a={300002:"雪幽魂",300003:"地藏像",300004:"蝠翼",300006:"涅槃之火",300007:"三味",300008:"魍魉之匣",300009:"被服",300010:"招财猫",300011:"反枕",300012:"轮入道",300013:"日女巳时",300014:"镜姬",300015:"钟灵",300018:"狰",300019:"火灵",300020:"鸣屋",300021:"薙魂",300022:"心眼",300023:"木魅",300024:"树妖",300026:"网切",300027:"阴摩罗",300029:"伤魂鸟",300030:"破势",300031:"镇墓兽",300032:"珍珠",300033:"骰子鬼",300034:"蚌精",300035:"魅妖",300036:"针女",300039:"返魂香",300048:"狂骨",300049:"幽谷响",300050:"土蜘蛛",300051:"胧车",300052:"荒骷髅",300053:"地震鲶",300054:"蜃气楼",300073:"飞缘魔",300074:"兵主部",300075:"青女房",300076:"涂佛",300077:"鬼灵歌伎",300079:"遗念火",300080:"共潜",300081:"恶楼",300082:"贝吹坊",300083:"海月火玉",300084:"出世螺",300085:"火之车",300086:"隐念",300087:"叠叩",300088:"应声虫",300089:"元兴寺",300090:"钓瓶火"},i={};for(r in a)i[a[r]]=r;t.a={code2name:a,name2code:i}},5663:function(e,t,n){},"594d":function(e,t,n){"use strict";n("3e10")},"62e5":function(e,t,n){e.exports=n.p+"img/qrcode.8f8a02d6.jpg"},6561:function(e,t,n){"use strict";var r=n("1da1"),a=(n("96cf"),n("99af"),n("b0c0"),n("ac1f"),n("5319"),n("d3b7"),n("7db0"),n("159b"),{mixins:[n("e175").a],props:{drag:{type:Boolean,default:!1}},data:function(){return{ext:null}},methods:{upload:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,a,i,s,o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.file,a=t.$loading({lock:!0}),console.log("读取御魂数据文件…"),n.prev=3,n.next=6,t.readYuhunFile(r);case 6:return i=n.sent,s=i.list,i=i.count15,console.log("读取完毕，总御魂数".concat(s.length," ，其中满级御魂数").concat(i)),s=s,o=(o=r.name).replace(".json",""),n.next=15,t.$yuhunset.find({name:{$eq:o}}).toArray();case 15:return 0<n.sent.length&&(o+=(new Date).getTime()),console.log("确定御魂集名称：".concat(o)),c=new Date,l={_id:c.getTime(),name:o,updatedAt:c,length:i,lengthNot15:s.length-i},console.log("准备保存御魂集…"),n.next=23,t.saveYuhunSet(l);case 23:return console.log("成功保存御魂集。"),s.forEach((function(e){e.setId=l._id,e._id=e.setId+e["御魂ID"]})),console.log("准备保存御魂数…"),n.next=28,t.$yuhunSave(l._id,s);case 28:return console.log("成功保存御魂数据。"),console.log("准备创建默认收藏夹…"),n.next=32,t.$collection.insert({setId:l._id,list:[{id:(new Date).getTime(),label:"默认",type:"folder",children:[]}]});case 32:console.log("成功创建默认收藏夹。"),a.close(),t.$emit("uploaded"),console.log("跳转到御魂Hub主页面"),t.$goto("home"),n.next=42;break;case 39:n.prev=39,n.t0=n.catch(3),a.close();case 42:case"end":return n.stop()}}),n,null,[[3,39]])})))()},saveYuhunSet:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$yuhunset.insert(e);case 2:t.$store.commit("addSet",e),t.$store.commit("changeCurrentSet",e),t.$ls.set("currentSetId",e._id);case 5:case"end":return n.stop()}}),n)})))()}}});n("b1b9"),n=n("2877"),n=Object(n.a)(a,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("div",{staticClass:"import-yuhun-box-page",staticStyle:{"text-align":"center"}},[t("el-row",[t("el-col",{attrs:{xs:24,sm:{span:20,offset:2},md:{span:18,offset:3},lg:{span:16,offset:4},xl:{span:14,offset:5}}},[t("el-upload",{staticStyle:{width:"100%"},attrs:{action:"#","http-request":e.upload,"before-upload":e.beforeUpload,drag:e.drag,"show-file-list":!1}},[t("i",{staticClass:"el-icon-upload"}),t("div",[e._t("default")],2)])],1)],1)],1)}),[],!1,null,null,null);t.a=n.exports},"7c04":function(e,t,n){},"88bd":function(e,t,n){},"8f5b":function(e,t,n){"use strict";var r=n("2f62");r={computed:Object(r.b)({history:function(e){return e.history}})},n=n("2877"),n=Object(n.a)(r,void 0,void 0,!1,null,null,null);t.a=n.exports},a884:function(e,t,n){"use strict";n("5663")},afe6:function(e,t,n){"use strict";n("4e82");var r=n("2f62");n("d3b7"),n("159b"),r={computed:Object(r.b)({setList:function(e){if(e.setList)return e=function(e){if(!e)return null;var t=[];return e.forEach((function(e){return t.push(e)})),t}(e.setList),e.sort((function(e,t){return t=t.updatedAt,"number"!=typeof t&&(t=(t="string"==typeof t?new Date(t):t).getTime()),e=e.updatedAt,t-("number"!=typeof e?(e="string"==typeof e?new Date(e):e).getTime():e)})),e}})},n=n("2877"),n=Object(n.a)(r,void 0,void 0,!1,null,null,null);t.a=n.exports},b0fc:function(e,t,n){e.exports=n.p+"img/weixin_logo.c69ec08c.svg"},b1b9:function(e,t,n){"use strict";n("7c04")},b668:function(e,t,n){"use strict";t.a=["荒骷髅","蜃气楼","土蜘蛛","地震鲶","胧车","鬼灵歌伎"]},cc49:function(e,t,n){e.exports=n.p+"img/weibo_logo.90989bd4.png"},ccd8:function(e,t,n){e.exports=n.p+"img/example-sync.0065a609.gif"},ce18:function(e,t,n){},ce54:function(e,t,n){"use strict";n("88bd")},d72f:function(e,t,n){"use strict";var r=n("2f62");r={computed:Object(r.b)({currentUser:function(e){return e.currentUser}})},n=n("2877"),n=Object(n.a)(r,void 0,void 0,!1,null,null,null);t.a=n.exports},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map;r({target:"Array",proto:!0,forced:!n("1dde")("map")},{map:function(e){return a(this,e,1<arguments.length?arguments[1]:void 0)}})},e164:function(e,t){e.exports="data:image/png;base64,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"},e175:function(e,t,n){"use strict";n("d3b7"),n("b0c0"),n("fb6a");var r=n("b85c"),a=function(e,t){return t?(t<1&&(t*=100),-1<["速度","暴击","生命加成","攻击加成","防御加成"].indexOf(e)?(n=t)<3?1:n<6?2:n<9?3:n<12?4:n<15?5:n<18?6:n<21?7:n<24?8:n<27?9:n<30?10:void 0:-1<["暴击伤害","效果命中","效果抵抗"].indexOf(e)?(n=t)<4?1:n<8?2:n<12?3:n<16?4:n<20?5:n<24?6:n<28?7:n<32?8:n<36?9:n<40?10:void 0:0):0;var n},i=n("e1bd"),s=n("a35a"),o=n("517a"),c=n("b668"),l=n("14c3");function u(e){"string"==typeof e[0]&&e.shift();var t,n=[],u=0,d=Object(r.a)(e);try{for(d.s();!(t=d.n()).done;){var p,m=t.value,f=(15===m["御魂等级"]&&u++,m.mainProp),h=(f||(f=function(e){var t=e["位置"];if(1===t)return"攻击";if(3===t)return"防御";if(5===t)return"生命";if(2===t&&e["速度"]&&30<e["速度"])return"速度";if(4===t){if(e["效果命中"]&&.3<e["效果命中"])return"效果命中";if(e["效果抵抗"]&&.3<e["效果抵抗"])return"效果抵抗"}if(6===t){if(e["暴击"]&&.3<e["暴击"])return"暴击";if(e["暴击伤害"]&&.3<e["暴击伤害"])return"暴击伤害"}return e["攻击加成"]&&.3<e["攻击加成"]?"攻击加成":e["生命加成"]&&.3<e["生命加成"]?"生命加成":e["防御加成"]&&.3<e["防御加成"]?"防御加成":void 0}(m),m.mainProp=f),-1<c.a.indexOf(m["御魂类型"])&&(m.isBossYuhun=!0,m["固有属性"]&&(m.bossFixedProp=m["固有属性"],delete m["固有属性"])),x=A=S=p=y=w=b=v=g=h=void 0,m),g=f,v=0,b=[],w=null,y=Object(r.a)(i.a);try{for(y.s();!(p=y.n()).done;){var x,S=p.value,A=h[S];(A=A&&(S===g?Object(l.a)(A-Object(s.a)(h)):A))&&(h.isBossYuhun&&(A===o.a[S]?w=S:A>o.a[S]&&b.push(S)),(x=a(S,A))&&(v+=h[S+"score"]=x))}}catch(e){y.e(e)}finally{y.f()}h.isBossYuhun&&!h.bossFixedProp&&(w||1===b.length&&(w=b[0]),w&&(h.bossFixedProp=w)),0<v&&(h.score=v),n.push(m)}}catch(e){d.e(e)}finally{d.f()}return{list:n,count15:u}}n("d81d"),n("159b"),n("99af"),n("b64b");var d=n("5439"),p={Hp:"生命",Defense:"防御",Attack:"攻击",HpRate:"生命加成",DefenseRate:"防御加成",AttackRate:"攻击加成",Speed:"速度",CritRate:"暴击",CritPower:"暴击伤害",EffectHitRate:"效果命中",EffectResistRate:"效果抵抗"},m=d.a.code2name,f={1:"AttackRate",2:"HpRate",3:"DefenseRate",4:"CritRate",5:"EffectHitRate",6:"EffectResistRate"},h=function(e){return e&&(e.equip_data?e.equip_data.map((function(e){var t,n=m[String(e.suit_id)],r={"御魂ID":e.id,"御魂等级":e.level,"御魂星级":e.quality,"御魂类型":n,"位置":e.pos,born:e.born,lock:e.lock,garbage:e.garbage,weared:e.weared,mainProp:p[Object.keys(e.base_attr)[0]]},a=(e.single_attr&&(r.bossFixedProp=p[f[e.single_attr]]),[]);for(t in e.rand_attr)a.push(p[t]);r.props=a;var i,s,o,c={};for(i in e.rand_attr){var l=c[i]||0;c[i]=l+e.rand_attr[i]}for(s in e.base_attr){var u=c[s]||0;c[s]=u+e.base_attr[s]}return e.single_attr&&(n=f[e.single_attr],o=c[n]||0,c[n]=o+("DefenseRate"===n?.16:.08)),Object.keys(c).forEach((function(e){r[p[e]]=c[e]})),r})):e.data&&e.data.hero_equips?(t=e.data.hero_equips,n=function(e){var t,n=[],a=Object(r.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value.equips;i&&0<i.length&&(n=n.concat(i))}}catch(e){a.e(e)}finally{a.f()}return n}(e.data.heroes),t.map((function(e){for(var t={"御魂ID":e.id,"御魂等级":e.level,"御魂星级":e.quality,"御魂类型":m[String(e.suit_id)],"位置":e.pos+1,born:e.born,lock:e.lock,garbage:e.garbage,weared:-1<n.indexOf(e.id),mainProp:p[e.base_attr.type]},r=(e.single_attrs&&0<e.single_attrs.length&&(t.bossFixedProp=p[e.single_attrs[0].type]),{}),a=[],i=(e.attrs.forEach((function(e){return a.push(p[e.type])})),t.props=a,[e.base_attr].concat(e.attrs,e.single_attrs)),s=0;s<i.length;s++){var o=i[s],c=r[o.type]||0;r[o.type]=c+o.value}return Object.keys(r).forEach((function(e){t[p[e]]=r[e]})),t}))):e);var t,n};d={methods:{beforeUpload:function(e){return e="json"===this.getFileExt(e),e||this.$message.error("导入文件只能是 Json(.json) 格式的文件"),e},readYuhunFile:function(e){var t=this;return new Promise((function(n,r){var a=new FileReader;a.addEventListener("error",(function(e){"NotFoundError"===e.target.error.name?t.$message.error("导入出错，请把Json文件解压出来之后再拖入御魂Hub"):t.$message.error("导入出错：".concat(e.target.error.name)),r()})),a.readAsText(e),a.onload=function(){var e=JSON.parse(a.result);e=h(e);n(u(e))}}))},getFileExt:function(e){var t=e.name.lastIndexOf(".");return e.name.slice(t+1).toLowerCase()}}},n=n("2877"),n=Object(n.a)(d,void 0,void 0,!1,null,null,null);t.a=n.exports},e1bd:function(e,t,n){"use strict";t.a=["攻击加成","暴击伤害","暴击","速度","效果命中","效果抵抗","生命加成","防御加成","攻击","防御","生命"]}}]);